type A = {
  integer i;
  integer j;
  boolean inv;
}

logic invA(A[0] this) = this.i == this.j

unit m(A[0] a)
  requires invA(a) && a.inv == true; /*** ici on aimerait bien demander uniquement a.inv == true ***/
  behavior ok:
    assigns a.i, a.j;
    ensures invA(a) && a.inv == true; /*** ici aussi d'ailleurs ***/
{
  /* unpack */
  assert a.inv;
  a.inv = false;
  /**********/
  a.i++;
  a.j++;
  /* pack */
  assert invA(a);
  a.inv = true;
  /********/
}
Options are: -journal-disable -cpp-extra-args=-I PPCHOME/share/jessie -jessie -jessie-gen-only bts0038.c
[kernel] preprocessing with "gcc -C -E -I. -I PPCHOME/share/jessie -dD bts0038.c"
bts0038.c:29:[kernel] warning: Body of function main falls-through. Adding a return statement
[jessie] Starting Jessie translation
[kernel] No code for function printf, default assigns generated
bts0038.c:29:[jessie] warning: skipping all arguments of implicit prototype printf
[jessie] Producing Jessie files in subdir bts0038.jessie
[jessie] File bts0038.jessie/bts0038.jc written.
[jessie] File bts0038.jessie/bts0038.cloc written.
# IntModel = bounded
# InvariantPolicy = Arguments
# SeparationPolicy = Regions
# AnnotationPolicy = None
# AbstractDomain = Pol

axiomatic Padding {

  logic type padding
  
}

type int32 = -2147483648..2147483647

type int8 = -128..127

tag int_P = {
  int32 int_M: 32;
}

type int_P = [int_P]

tag char_P = {
  int8 char_M: 8;
}

type char_P = [char_P]

tag void_P = {
}

type void_P = [void_P]

char_P[0..3] __string__d_;

invariant valid___string__d_ :
((\offset_min(__string__d_) <= 0) && (\offset_max(__string__d_) >= 3))

unit __globinit_whole_program()
behavior default:
  assumes true;
  ensures (C_1 : true);
;

unit Copy(int_P[..] p, int_P[..] q)
behavior default:
  assumes true;
  ensures (C_5 : true);
{  
   {  (C_4 : ((C_3 : q.int_M) = (C_2 : p.int_M)));
      
      (return ())
   }
}

int32 foo(int_P[..] a)
behavior default:
  assumes true;
  ensures (C_10 : true);
{  
   (var int32 i);
   
   {  (C_6 : (i = 1));
      (C_9 : Copy((C_7 : (a + 0)), (C_8 : (a + i))));
      
      (return i)
   }
}

int32 printf()
behavior default:
  assumes true;
  assigns \nothing;
  ensures (C_11 : true);
;

int32 main()
behavior default:
  assumes true;
  ensures (C_24 : true);
{  
   (var int_P[0..1] a_0);
   
   (var int32 tmp);
   
   (var int32 __retres);
   
   {  (C_13 : (a_0 = (C_12 : (new int_P[2]))));
      (C_14 : __globinit_whole_program());
      (C_16 : ((C_15 : (a_0 + 0).int_M) = 1));
      (C_18 : ((C_17 : (a_0 + 1).int_M) = 2));
      (C_20 : (tmp = (C_19 : foo(a_0))));
      (C_21 : printf());
      (C_22 : (__retres = 0));
      
      {  (C_23 : (free(a_0)));
         
         (return __retres)
      }
   }
}
WHYLIB=WHYHOME/lib WHYHOME/bin/jessie.opt -why-opt -split-user-conj -why-opt -fast-wp -locs bts0038.jessie/bts0038.cloc bts0038.jessie/bts0038.jc
type __string__d__1

type char_P

type int32

type int8

type int_P

type padding

type void_P

exception Loop_continue_exc of unit

exception Loop_exit_exc of unit

exception Return_label_exc of unit

logic __string__d_:  -> char_P pointer

logic bitvector_of_char_P: char_P pointer -> bitvector

logic char_P_of_bitvector: bitvector -> char_P pointer

axiom bitvector_of_char_P_of_char_P_of_bitvector :
 (forall x:bitvector. (bitvector_of_char_P(char_P_of_bitvector(x)) = x))

logic bitvector_of_int32: int32 -> bitvector

logic int32_of_bitvector: bitvector -> int32

axiom bitvector_of_int32_of_int32_of_bitvector :
 (forall x:bitvector. (bitvector_of_int32(int32_of_bitvector(x)) = x))

logic bitvector_of_int8: int8 -> bitvector

logic int8_of_bitvector: bitvector -> int8

axiom bitvector_of_int8_of_int8_of_bitvector :
 (forall x:bitvector. (bitvector_of_int8(int8_of_bitvector(x)) = x))

logic bitvector_of_int_P: int_P pointer -> bitvector

logic int_P_of_bitvector: bitvector -> int_P pointer

axiom bitvector_of_int_P_of_int_P_of_bitvector :
 (forall x:bitvector. (bitvector_of_int_P(int_P_of_bitvector(x)) = x))

logic bitvector_of_void_P: void_P pointer -> bitvector

logic void_P_of_bitvector: bitvector -> void_P pointer

axiom bitvector_of_void_P_of_void_P_of_bitvector :
 (forall x:bitvector. (bitvector_of_void_P(void_P_of_bitvector(x)) = x))

logic char_P_tag:  -> char_P tag_id

axiom char_P_int : (int_of_tag(char_P_tag) = (1))

axiom char_P_of_bitvector_of_bitvector_of_char_P :
 (forall x:char_P pointer. (char_P_of_bitvector(bitvector_of_char_P(x)) = x))

logic char_P_of_pointer_address: unit pointer -> char_P pointer

axiom char_P_of_pointer_address_of_pointer_addr :
 (forall p:char_P pointer.
  (p = char_P_of_pointer_address(pointer_address(p))))

axiom char_P_parenttag_bottom : parenttag(char_P_tag, bottom_tag)

axiom char_P_tags :
 (forall x:char_P pointer.
  (forall char_P_tag_table:char_P tag_table.
   instanceof(char_P_tag_table, x, char_P_tag)))

logic integer_of_int32: int32 -> int

predicate eq_int32(x:int32,
 y:int32) =
 eq_int(integer_of_int32(x), integer_of_int32(y))

logic integer_of_int8: int8 -> int

predicate eq_int8(x:int8,
 y:int8) =
 eq_int(integer_of_int8(x), integer_of_int8(y))

logic int32_of_integer: int -> int32

axiom int32_coerce :
 (forall x:int.
  ((le_int((-2147483648), x) and le_int(x, (2147483647))) ->
   eq_int(integer_of_int32(int32_of_integer(x)), x)))

axiom int32_of_bitvector_of_bitvector_of_int32 :
 (forall x:int32. eq_int32(int32_of_bitvector(bitvector_of_int32(x)), x))

axiom int32_range :
 (forall x:int32.
  (le_int((-2147483648), integer_of_int32(x))
  and le_int(integer_of_int32(x), (2147483647))))

logic int8_of_integer: int -> int8

axiom int8_coerce :
 (forall x:int.
  ((le_int((-128), x) and le_int(x, (127))) ->
   eq_int(integer_of_int8(int8_of_integer(x)), x)))

axiom int8_of_bitvector_of_bitvector_of_int8 :
 (forall x:int8. eq_int8(int8_of_bitvector(bitvector_of_int8(x)), x))

axiom int8_range :
 (forall x:int8.
  (le_int((-128), integer_of_int8(x)) and le_int(integer_of_int8(x), (127))))

logic int_P_tag:  -> int_P tag_id

axiom int_P_int : (int_of_tag(int_P_tag) = (1))

axiom int_P_of_bitvector_of_bitvector_of_int_P :
 (forall x:int_P pointer. (int_P_of_bitvector(bitvector_of_int_P(x)) = x))

logic int_P_of_pointer_address: unit pointer -> int_P pointer

axiom int_P_of_pointer_address_of_pointer_addr :
 (forall p:int_P pointer. (p = int_P_of_pointer_address(pointer_address(p))))

axiom int_P_parenttag_bottom : parenttag(int_P_tag, bottom_tag)

axiom int_P_tags :
 (forall x:int_P pointer.
  (forall int_P_tag_table:int_P tag_table.
   instanceof(int_P_tag_table, x, int_P_tag)))

predicate left_valid_struct_char_P(p:char_P pointer,
 a:int,
 char_P_alloc_table:char_P alloc_table) =
 (offset_min(char_P_alloc_table, p) <= a)

predicate left_valid_struct_int_P(p:int_P pointer,
 a:int,
 int_P_alloc_table:int_P alloc_table) =
 (offset_min(int_P_alloc_table, p) <= a)

predicate left_valid_struct_void_P(p:void_P pointer,
 a:int,
 void_P_alloc_table:void_P alloc_table) =
 (offset_min(void_P_alloc_table, p) <= a)

axiom pointer_addr_of_char_P_of_pointer_address :
 (forall p:unit pointer. (p = pointer_address(char_P_of_pointer_address(p))))

axiom pointer_addr_of_int_P_of_pointer_address :
 (forall p:unit pointer. (p = pointer_address(int_P_of_pointer_address(p))))

logic void_P_of_pointer_address: unit pointer -> void_P pointer

axiom pointer_addr_of_void_P_of_pointer_address :
 (forall p:unit pointer. (p = pointer_address(void_P_of_pointer_address(p))))

predicate right_valid_struct_char_P(p:char_P pointer,
 b:int,
 char_P_alloc_table:char_P alloc_table) =
 (offset_max(char_P_alloc_table, p) >= b)

predicate right_valid_struct_int_P(p:int_P pointer,
 b:int,
 int_P_alloc_table:int_P alloc_table) =
 (offset_max(int_P_alloc_table, p) >= b)

predicate right_valid_struct_void_P(p:void_P pointer,
 b:int,
 void_P_alloc_table:void_P alloc_table) =
 (offset_max(void_P_alloc_table, p) >= b)

predicate strict_valid_root_char_P(p:char_P pointer,
 a:int,
 b:int,
 char_P_alloc_table:char_P alloc_table) =
 ((offset_min(char_P_alloc_table, p) = a)
 and (offset_max(char_P_alloc_table, p) = b))

predicate strict_valid_root_int_P(p:int_P pointer,
 a:int,
 b:int,
 int_P_alloc_table:int_P alloc_table) =
 ((offset_min(int_P_alloc_table, p) = a)
 and (offset_max(int_P_alloc_table, p) = b))

predicate strict_valid_root_void_P(p:void_P pointer,
 a:int,
 b:int,
 void_P_alloc_table:void_P alloc_table) =
 ((offset_min(void_P_alloc_table, p) = a)
 and (offset_max(void_P_alloc_table, p) = b))

predicate strict_valid_struct_char_P(p:char_P pointer,
 a:int,
 b:int,
 char_P_alloc_table:char_P alloc_table) =
 ((offset_min(char_P_alloc_table, p) = a)
 and (offset_max(char_P_alloc_table, p) = b))

predicate strict_valid_struct_int_P(p:int_P pointer,
 a:int,
 b:int,
 int_P_alloc_table:int_P alloc_table) =
 ((offset_min(int_P_alloc_table, p) = a)
 and (offset_max(int_P_alloc_table, p) = b))

predicate strict_valid_struct_void_P(p:void_P pointer,
 a:int,
 b:int,
 void_P_alloc_table:void_P alloc_table) =
 ((offset_min(void_P_alloc_table, p) = a)
 and (offset_max(void_P_alloc_table, p) = b))

predicate valid___string__d_(char_P___string__d__1_alloc_table:char_P alloc_table) =
 (le_int(offset_min(char_P___string__d__1_alloc_table, __string__d_), (0))
 and ge_int(offset_max(char_P___string__d__1_alloc_table, __string__d_), (3)))

predicate valid_bitvector_struct_char_P(p:unit pointer,
 a:int,
 b:int,
 bitvector_alloc_table:unit alloc_table) =
 ((offset_min(bitvector_alloc_table, p) = a)
 and (offset_max(bitvector_alloc_table, p) = b))

predicate valid_bitvector_struct_int_P(p:unit pointer,
 a:int,
 b:int,
 bitvector_alloc_table:unit alloc_table) =
 ((offset_min(bitvector_alloc_table, p) = a)
 and (offset_max(bitvector_alloc_table, p) = b))

predicate valid_bitvector_struct_void_P(p:unit pointer,
 a:int,
 b:int,
 bitvector_alloc_table:unit alloc_table) =
 ((offset_min(bitvector_alloc_table, p) = a)
 and (offset_max(bitvector_alloc_table, p) = b))

predicate valid_root_char_P(p:char_P pointer,
 a:int,
 b:int,
 char_P_alloc_table:char_P alloc_table) =
 ((offset_min(char_P_alloc_table, p) <= a)
 and (offset_max(char_P_alloc_table, p) >= b))

predicate valid_root_int_P(p:int_P pointer,
 a:int,
 b:int,
 int_P_alloc_table:int_P alloc_table) =
 ((offset_min(int_P_alloc_table, p) <= a)
 and (offset_max(int_P_alloc_table, p) >= b))

predicate valid_root_void_P(p:void_P pointer,
 a:int,
 b:int,
 void_P_alloc_table:void_P alloc_table) =
 ((offset_min(void_P_alloc_table, p) <= a)
 and (offset_max(void_P_alloc_table, p) >= b))

predicate valid_struct_char_P(p:char_P pointer,
 a:int,
 b:int,
 char_P_alloc_table:char_P alloc_table) =
 ((offset_min(char_P_alloc_table, p) <= a)
 and (offset_max(char_P_alloc_table, p) >= b))

predicate valid_struct_int_P(p:int_P pointer,
 a:int,
 b:int,
 int_P_alloc_table:int_P alloc_table) =
 ((offset_min(int_P_alloc_table, p) <= a)
 and (offset_max(int_P_alloc_table, p) >= b))

predicate valid_struct_void_P(p:void_P pointer,
 a:int,
 b:int,
 void_P_alloc_table:void_P alloc_table) =
 ((offset_min(void_P_alloc_table, p) <= a)
 and (offset_max(void_P_alloc_table, p) >= b))

logic void_P_tag:  -> void_P tag_id

axiom void_P_int : (int_of_tag(void_P_tag) = (1))

axiom void_P_of_bitvector_of_bitvector_of_void_P :
 (forall x:void_P pointer. (void_P_of_bitvector(bitvector_of_void_P(x)) = x))

axiom void_P_of_pointer_address_of_pointer_addr :
 (forall p:void_P pointer.
  (p = void_P_of_pointer_address(pointer_address(p))))

axiom void_P_parenttag_bottom : parenttag(void_P_tag, bottom_tag)

axiom void_P_tags :
 (forall x:void_P pointer.
  (forall void_P_tag_table:void_P tag_table.
   instanceof(void_P_tag_table, x, void_P_tag)))

parameter char_P___string__d__1_alloc_table : char_P alloc_table ref

parameter Copy :
 p:int_P pointer ->
  q:int_P pointer ->
   int_P_int_M_q_3:(int_P, int32) memory ref ->
    int_P_q_3_alloc_table:int_P alloc_table ->
     int_P_p_2_alloc_table:int_P alloc_table ->
      int_P_int_M_p_2:(int_P, int32) memory ->
       { } unit reads char_P___string__d__1_alloc_table
       writes int_P_int_M_q_3
       { (JC_21: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter Copy_requires :
 p:int_P pointer ->
  q:int_P pointer ->
   int_P_int_M_q_3:(int_P, int32) memory ref ->
    int_P_q_3_alloc_table:int_P alloc_table ->
     int_P_p_2_alloc_table:int_P alloc_table ->
      int_P_int_M_p_2:(int_P, int32) memory ->
       { (JC_14: valid___string__d_(char_P___string__d__1_alloc_table))} unit
       reads char_P___string__d__1_alloc_table writes int_P_int_M_q_3
       { (JC_21: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter Copy_requires_specialized :
 p:int_P pointer ->
  q:int_P pointer ->
   int_P_int_M_q_3:(int_P, int32) memory ref ->
    int_P_q_3_alloc_table:int_P alloc_table ->
     int_P_p_2_alloc_table:int_P alloc_table ->
      { (JC_14: valid___string__d_(char_P___string__d__1_alloc_table))} unit
      reads char_P___string__d__1_alloc_table writes int_P_int_M_q_3
      { (JC_21: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter Copy_specialized :
 p:int_P pointer ->
  q:int_P pointer ->
   int_P_int_M_q_3:(int_P, int32) memory ref ->
    int_P_q_3_alloc_table:int_P alloc_table ->
     int_P_p_2_alloc_table:int_P alloc_table ->
      { } unit reads char_P___string__d__1_alloc_table writes int_P_int_M_q_3
      { (JC_21: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter __globinit_whole_program :
 tt:unit ->
  { } unit reads char_P___string__d__1_alloc_table
  { (JC_13: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter __globinit_whole_program_requires :
 tt:unit ->
  { (JC_6: valid___string__d_(char_P___string__d__1_alloc_table))} unit
  reads char_P___string__d__1_alloc_table
  { (JC_13: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter alloc_bitvector_struct_char_P :
 n:int ->
  bitvector_alloc_table:unit alloc_table ref ->
   { } unit pointer writes bitvector_alloc_table
   { (valid_bitvector_struct_char_P(result, (0), sub_int(n, (1)),
      bitvector_alloc_table)
     and (alloc_extends(bitvector_alloc_table@, bitvector_alloc_table)
         and alloc_fresh(bitvector_alloc_table@, result, n))) }

parameter alloc_bitvector_struct_char_P_requires :
 n:int ->
  bitvector_alloc_table:unit alloc_table ref ->
   { ge_int(n, (0))} unit pointer writes bitvector_alloc_table
   { (valid_bitvector_struct_char_P(result, (0), sub_int(n, (1)),
      bitvector_alloc_table)
     and (alloc_extends(bitvector_alloc_table@, bitvector_alloc_table)
         and alloc_fresh(bitvector_alloc_table@, result, n))) }

parameter alloc_bitvector_struct_int_P :
 n:int ->
  bitvector_alloc_table:unit alloc_table ref ->
   { } unit pointer writes bitvector_alloc_table
   { (valid_bitvector_struct_int_P(result, (0), sub_int(n, (1)),
      bitvector_alloc_table)
     and (alloc_extends(bitvector_alloc_table@, bitvector_alloc_table)
         and alloc_fresh(bitvector_alloc_table@, result, n))) }

parameter alloc_bitvector_struct_int_P_requires :
 n:int ->
  bitvector_alloc_table:unit alloc_table ref ->
   { ge_int(n, (0))} unit pointer writes bitvector_alloc_table
   { (valid_bitvector_struct_int_P(result, (0), sub_int(n, (1)),
      bitvector_alloc_table)
     and (alloc_extends(bitvector_alloc_table@, bitvector_alloc_table)
         and alloc_fresh(bitvector_alloc_table@, result, n))) }

parameter alloc_bitvector_struct_void_P :
 n:int ->
  bitvector_alloc_table:unit alloc_table ref ->
   { } unit pointer writes bitvector_alloc_table
   { (valid_bitvector_struct_void_P(result, (0), sub_int(n, (1)),
      bitvector_alloc_table)
     and (alloc_extends(bitvector_alloc_table@, bitvector_alloc_table)
         and alloc_fresh(bitvector_alloc_table@, result, n))) }

parameter alloc_bitvector_struct_void_P_requires :
 n:int ->
  bitvector_alloc_table:unit alloc_table ref ->
   { ge_int(n, (0))} unit pointer writes bitvector_alloc_table
   { (valid_bitvector_struct_void_P(result, (0), sub_int(n, (1)),
      bitvector_alloc_table)
     and (alloc_extends(bitvector_alloc_table@, bitvector_alloc_table)
         and alloc_fresh(bitvector_alloc_table@, result, n))) }

parameter char_P_alloc_table : char_P alloc_table ref

parameter char_P_tag_table : char_P tag_table ref

parameter alloc_struct_char_P :
 n:int ->
  char_P_alloc_table:char_P alloc_table ref ->
   char_P_tag_table:char_P tag_table ref ->
    { } char_P pointer writes char_P_alloc_table,char_P_tag_table
    { (strict_valid_struct_char_P(result, (0), sub_int(n, (1)),
       char_P_alloc_table)
      and (alloc_extends(char_P_alloc_table@, char_P_alloc_table)
          and (alloc_fresh(char_P_alloc_table@, result, n)
              and instanceof(char_P_tag_table, result, char_P_tag)))) }

parameter alloc_struct_char_P_requires :
 n:int ->
  char_P_alloc_table:char_P alloc_table ref ->
   char_P_tag_table:char_P tag_table ref ->
    { ge_int(n, (0))} char_P pointer
    writes char_P_alloc_table,char_P_tag_table
    { (strict_valid_struct_char_P(result, (0), sub_int(n, (1)),
       char_P_alloc_table)
      and (alloc_extends(char_P_alloc_table@, char_P_alloc_table)
          and (alloc_fresh(char_P_alloc_table@, result, n)
              and instanceof(char_P_tag_table, result, char_P_tag)))) }

parameter int_P_alloc_table : int_P alloc_table ref

parameter int_P_tag_table : int_P tag_table ref

parameter alloc_struct_int_P :
 n:int ->
  int_P_alloc_table:int_P alloc_table ref ->
   int_P_tag_table:int_P tag_table ref ->
    { } int_P pointer writes int_P_alloc_table,int_P_tag_table
    { (strict_valid_struct_int_P(result, (0), sub_int(n, (1)),
       int_P_alloc_table)
      and (alloc_extends(int_P_alloc_table@, int_P_alloc_table)
          and (alloc_fresh(int_P_alloc_table@, result, n)
              and instanceof(int_P_tag_table, result, int_P_tag)))) }

parameter alloc_struct_int_P_requires :
 n:int ->
  int_P_alloc_table:int_P alloc_table ref ->
   int_P_tag_table:int_P tag_table ref ->
    { ge_int(n, (0))} int_P pointer writes int_P_alloc_table,int_P_tag_table
    { (strict_valid_struct_int_P(result, (0), sub_int(n, (1)),
       int_P_alloc_table)
      and (alloc_extends(int_P_alloc_table@, int_P_alloc_table)
          and (alloc_fresh(int_P_alloc_table@, result, n)
              and instanceof(int_P_tag_table, result, int_P_tag)))) }

parameter void_P_alloc_table : void_P alloc_table ref

parameter void_P_tag_table : void_P tag_table ref

parameter alloc_struct_void_P :
 n:int ->
  void_P_alloc_table:void_P alloc_table ref ->
   void_P_tag_table:void_P tag_table ref ->
    { } void_P pointer writes void_P_alloc_table,void_P_tag_table
    { (strict_valid_struct_void_P(result, (0), sub_int(n, (1)),
       void_P_alloc_table)
      and (alloc_extends(void_P_alloc_table@, void_P_alloc_table)
          and (alloc_fresh(void_P_alloc_table@, result, n)
              and instanceof(void_P_tag_table, result, void_P_tag)))) }

parameter alloc_struct_void_P_requires :
 n:int ->
  void_P_alloc_table:void_P alloc_table ref ->
   void_P_tag_table:void_P tag_table ref ->
    { ge_int(n, (0))} void_P pointer
    writes void_P_alloc_table,void_P_tag_table
    { (strict_valid_struct_void_P(result, (0), sub_int(n, (1)),
       void_P_alloc_table)
      and (alloc_extends(void_P_alloc_table@, void_P_alloc_table)
          and (alloc_fresh(void_P_alloc_table@, result, n)
              and instanceof(void_P_tag_table, result, void_P_tag)))) }

parameter any_int32 : unit -> { } int32 { true }

parameter any_int8 : unit -> { } int8 { true }

parameter foo :
 a:int_P pointer ->
  int_P_int_M_a_4:(int_P, int32) memory ref ->
   int_P_a_4_alloc_table:int_P alloc_table ->
    { } int32 reads char_P___string__d__1_alloc_table,int_P_int_M_a_4
    writes int_P_int_M_a_4
    { (JC_32: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter foo_requires :
 a:int_P pointer ->
  int_P_int_M_a_4:(int_P, int32) memory ref ->
   int_P_a_4_alloc_table:int_P alloc_table ->
    { (JC_25: valid___string__d_(char_P___string__d__1_alloc_table))} int32
    reads char_P___string__d__1_alloc_table,int_P_int_M_a_4
    writes int_P_int_M_a_4
    { (JC_32: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter int32_of_integer_ :
 x:int ->
  { (le_int((-2147483648), x) and le_int(x, (2147483647)))} int32
  { eq_int(integer_of_int32(result), x) }

parameter int8_of_integer_ :
 x:int ->
  { (le_int((-128), x) and le_int(x, (127)))} int8
  { eq_int(integer_of_int8(result), x) }

parameter main :
 tt:unit ->
  { } int32 reads char_P___string__d__1_alloc_table
  { (JC_53: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter main_requires :
 tt:unit ->
  { (JC_46: valid___string__d_(char_P___string__d__1_alloc_table))} int32
  reads char_P___string__d__1_alloc_table
  { (JC_53: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter printf :
 tt:unit ->
  { } int32 reads char_P___string__d__1_alloc_table
  { (JC_45: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter printf_requires :
 tt:unit ->
  { (JC_36: valid___string__d_(char_P___string__d__1_alloc_table))} int32
  reads char_P___string__d__1_alloc_table
  { (JC_45: valid___string__d_(char_P___string__d__1_alloc_table)) }

parameter safe_int32_of_integer_ :
 x:int -> { } int32 { eq_int(integer_of_int32(result), x) }

parameter safe_int8_of_integer_ :
 x:int -> { } int8 { eq_int(integer_of_int8(result), x) }

let Copy_ensures_default =
 fun (p : int_P pointer) (q : int_P pointer) (int_P_int_M_q_3 : (int_P, int32) memory ref) (int_P_p_2_alloc_table : int_P alloc_table) (int_P_q_3_alloc_table : int_P alloc_table) (int_P_int_M_p_2 : (int_P, int32) memory) ->
  { ((true = true)
    and (JC_16: valid___string__d_(char_P___string__d__1_alloc_table))) }
  (init:
  try
   begin
     (C_4:
     begin
       (let jessie_10 = (let jessie_6 = (C_2:
                                        ((safe_acc_ int_P_int_M_p_2) p)) in
                        (let jessie_9 = q in
                        (((safe_upd_ int_P_int_M_q_3) jessie_9) jessie_6))) in
       void);
      (raise Return)
     end);
    (raise Return)
   end
   with
   Return ->
   void end)
  { (JC_18: true) }

let Copy_safety =
 fun (p : int_P pointer) (q : int_P pointer) (int_P_int_M_q_3 : (int_P, int32) memory ref) (int_P_p_2_alloc_table : int_P alloc_table) (int_P_q_3_alloc_table : int_P alloc_table) (int_P_int_M_p_2 : (int_P, int32) memory) ->
  { (JC_16: valid___string__d_(char_P___string__d__1_alloc_table)) }
  (init:
  try
   begin
     (C_4:
     begin
       (let jessie_5 = (let jessie_1 = (C_2:
                                       (JC_23:
                                       (((acc_ int_P_p_2_alloc_table) int_P_int_M_p_2) p))) in
                       (let jessie_4 = q in
                       (JC_24:
                       ((((upd_ int_P_q_3_alloc_table) int_P_int_M_q_3) jessie_4) jessie_1)))) in
       void);
      (raise Return)
     end);
    (raise Return)
   end
   with
   Return ->
   void end)
  { (JC_20: valid___string__d_(char_P___string__d__1_alloc_table)) }

let foo_ensures_default =
 fun (a : int_P pointer) (int_P_int_M_a_4 : (int_P, int32) memory ref) (int_P_a_4_alloc_table : int_P alloc_table) ->
  { ((true = true)
    and (JC_27: valid___string__d_(char_P___string__d__1_alloc_table))) }
  (init:
  (let return = ref (any_int32 void) in
  try
   begin
     (let i = ref (any_int32 void) in
     (C_6:
     begin
       (let jessie_14 = (i := (safe_int32_of_integer_ (1))) in void);
      (C_9:
      begin
        (JC_35:
        (((((Copy_specialized (C_7: ((shift a) (0)))) (C_8:
                                                      ((shift a) (integer_of_int32 !i)))) int_P_int_M_a_4) int_P_a_4_alloc_table) int_P_a_4_alloc_table));
       (return := !i);
       (raise Return)
      end)
     end));
    absurd 
   end
   with
   Return ->
   !return end))
  { (JC_29: true) }

let foo_safety =
 fun (a : int_P pointer) (int_P_int_M_a_4 : (int_P, int32) memory ref) (int_P_a_4_alloc_table : int_P alloc_table) ->
  { (JC_27: valid___string__d_(char_P___string__d__1_alloc_table)) }
  (init:
  (let return = ref (any_int32 void) in
  try
   begin
     (let i = ref (any_int32 void) in
     (C_6:
     begin
       (let jessie_11 = (i := (safe_int32_of_integer_ (1))) in void);
      (C_9:
      begin
        (JC_34:
        (assert
        { pset_disjoint(pset_range(pset_singleton(a), (0), (0)),
          pset_range(pset_singleton(a), i, i)) };
        (JC_33:
        (((((Copy_requires_specialized (C_7: ((shift a) (0)))) (C_8:
                                                               ((shift a) 
                                                                (integer_of_int32 !i)))) int_P_int_M_a_4) int_P_a_4_alloc_table) int_P_a_4_alloc_table))));
       (return := !i);
       (raise Return)
      end)
     end));
    absurd 
   end
   with
   Return ->
   !return end))
  { (JC_31: valid___string__d_(char_P___string__d__1_alloc_table)) }

let main_ensures_default =
 fun (tt : unit) ->
  { ((true = true)
    and (JC_48: valid___string__d_(char_P___string__d__1_alloc_table))) }
  (init:
  (let return = ref (any_int32 void) in
  try
   begin
     (let int_P_int_M_a_0_5 = ref (any_memory void) in
     (let int_P_a_0_5_tag_table = ref (any_tag_table void) in
     (let int_P_a_0_5_alloc_table = ref (any_alloc_table void) in
     (let a_0 = ref (any_pointer void) in
     (let tmp = ref (any_int32 void) in
     (let __retres = ref (any_int32 void) in
     (C_13:
     begin
       (let jessie_35 = (a_0 := (C_12:
                                (JC_61:
                                (((alloc_struct_int_P (2)) int_P_a_0_5_alloc_table) int_P_a_0_5_tag_table)))) in
       void);
      (C_14:
      begin
        (JC_62: (__globinit_whole_program void));
       (C_16:
       begin
         (let jessie_40 = (let jessie_36 = (safe_int32_of_integer_ (1)) in
                          (let jessie_39 = ((shift !a_0) (0)) in
                          (((safe_upd_ int_P_int_M_a_0_5) jessie_39) jessie_36))) in
         void);
        (C_18:
        begin
          (let jessie_45 = (let jessie_41 = (safe_int32_of_integer_ (2)) in
                           (let jessie_44 = ((shift !a_0) (1)) in
                           (((safe_upd_ int_P_int_M_a_0_5) jessie_44) jessie_41))) in
          void);
         (C_20:
         begin
           (let jessie_48 = (tmp := (C_19:
                                    (JC_64:
                                    (((foo !a_0) int_P_int_M_a_0_5) !int_P_a_0_5_alloc_table)))) in
           void);
          (C_21:
          begin
            (let jessie_49 = (JC_65: (printf void)) in void);
           (C_22:
           begin
             (let jessie_50 = (__retres := (safe_int32_of_integer_ (0))) in
             void);
            (C_23:
            begin
              ((safe_free_parameter int_P_a_0_5_alloc_table) !a_0);
             (return := !__retres);
             (raise Return)
            end)
           end)
          end)
         end)
        end)
       end)
      end)
     end)))))));
    absurd 
   end
   with
   Return ->
   !return end))
  { (JC_50: true) }

let main_safety =
 fun (tt : unit) ->
  { (JC_48: valid___string__d_(char_P___string__d__1_alloc_table)) }
  (init:
  (let return = ref (any_int32 void) in
  try
   begin
     (let int_P_int_M_a_0_5 = ref (any_memory void) in
     (let int_P_a_0_5_tag_table = ref (any_tag_table void) in
     (let int_P_a_0_5_alloc_table = ref (any_alloc_table void) in
     (let a_0 = ref (any_pointer void) in
     (let tmp = ref (any_int32 void) in
     (let __retres = ref (any_int32 void) in
     (C_13:
     begin
       (let jessie_18 = (a_0 := (let jessie_17 = (C_12:
                                                 (JC_54:
                                                 (((alloc_struct_int_P_requires (2)) int_P_a_0_5_alloc_table) int_P_a_0_5_tag_table))) in
                                (JC_55:
                                (assert
                                { ge_int(offset_max(int_P_a_0_5_alloc_table,
                                         jessie_17),
                                  (1)) };
                                jessie_17)))) in
       void);
      (C_14:
      begin
        (JC_56: (__globinit_whole_program_requires void));
       (C_16:
       begin
         (let jessie_23 = (let jessie_19 = (safe_int32_of_integer_ (1)) in
                          (let jessie_22 = ((shift !a_0) (0)) in
                          (((safe_upd_ int_P_int_M_a_0_5) jessie_22) jessie_19))) in
         void);
        (C_18:
        begin
          (let jessie_28 = (let jessie_24 = (safe_int32_of_integer_ (2)) in
                           (let jessie_27 = ((shift !a_0) (1)) in
                           (((safe_upd_ int_P_int_M_a_0_5) jessie_27) jessie_24))) in
          void);
         (C_20:
         begin
           (let jessie_31 = (tmp := (C_19:
                                    (JC_58:
                                    (((foo_requires !a_0) int_P_int_M_a_0_5) !int_P_a_0_5_alloc_table)))) in
           void);
          (C_21:
          begin
            (let jessie_32 = (JC_59: (printf_requires void)) in void);
           (C_22:
           begin
             (let jessie_33 = (__retres := (safe_int32_of_integer_ (0))) in
             void);
            (C_23:
            begin
              ((free_parameter int_P_a_0_5_alloc_table) !a_0);
             (return := !__retres);
             (raise Return)
            end)
           end)
          end)
         end)
        end)
       end)
      end)
     end)))))));
    absurd 
   end
   with
   Return ->
   !return end))
  { (JC_52: valid___string__d_(char_P___string__d__1_alloc_table)) }


WHYLIB=WHYHOME/lib WHYEXEC=WHYHOME/bin/why.opt GWHYEXEC=WHYHOME/bin/gwhy.opt make --quiet -C bts0038.jessie --quiet -f bts0038.makefile project
why --project [...] why/bts0038.why
